

<div id="overlay" *ngIf="showRecipientData" (click)="hideRecipientCard()"></div>
<div class="container" *ngIf="showRecipientData">
    <div class="fixedDiv mat-elevation-z4">
        <app-selected-recipient
          (actionTaken)="setActionTaken($event)"
          [profile]="profile"
          [surveys]="surveys"
          [selectedRecipient]="selectedRecipient"></app-selected-recipient>
    </div>
</div>
<mat-card class="list-card mat-elevation-z5">
    <mat-card-header>
        <div mat-card-avatar class="example-header-image"></div>
        <mat-card-title>Assigned Anons</mat-card-title>
        <mat-card-subtitle>Anon's Assigned to you</mat-card-subtitle>
        <mat-card-subtitle *ngIf="isAdmin">(Admins cannot view their own histories with the admins)</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <div *ngIf="(histories.length == 0) && !loading">
        <h1>No assignments to display!</h1>
      </div>
      <div *ngIf="loading">
        <app-small-loading-spin></app-small-loading-spin>
      </div>
      <div *ngIf="histories.length != 0">
        <app-chat-histories
        [disabled]="gettingAllHistories"
        [onProfile]="true"
        [histories]="histories"
        (chatSelectedEvent)="historySelected($event)"
        (recipientSelectedEvent)="showRecipientCard($event)"></app-chat-histories>
      </div>
    </mat-card-content>
    <mat-card-actions>
      <!-- Only show a general history if they are not an admin and the app is not initializing -->
      <button mat-raised-button *ngIf="!isAdmin && !initializing"
        (click)="historySelected(null)"
        [disabled]="gettingProfile || gettingGeneralHistory"
        [matBadge]="generalHistory.unreadCount"
        [matBadgeHidden]="generalHistory.unreadCount == 0">General Correspondence</button>
    </mat-card-actions>
</mat-card>
